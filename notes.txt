
****Integrationtests example*********
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;

import java.util.List;

import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest
public class BirdServiceIntegrationTest {

    @Autowired
    private BirdService birdService;

    @Autowired
    private BirdRepository birdRepository;

    @BeforeEach
    public void setUp() {
        // Clean up the database before each test
        birdRepository.deleteAll();
    }

    @Test
    public void testAddBird() {
        Bird bird = new Bird();
        bird.setType("Sparrow");
        ResponseEntity<String> response = birdService.addBird(bird);

        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED);
        assertThat(response.getBody()).isEqualTo("Successfully added new Bird!");
    }

    @Test
    public void testGetAllBirds() {
        Bird bird1 = new Bird();
        bird1.setType("Sparrow");
        birdRepository.save(bird1);

        Bird bird2 = new Bird();
        bird2.setType("Crow");
        birdRepository.save(bird2);

        ResponseEntity<List<Bird>> response = birdService.getAllBirds();

        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(response.getBody()).hasSize(2);
    }



}


******Workflow with unittests and integrationtests********
name: Build & Test

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up JDK
      uses: actions/setup-java@v2
      with:
        distribution: 'adopt'
        java-version: '11' # Use your project's JDK version

    - name: Cache Gradle dependencies
      uses: actions/cache@v2
      with:
        path: |
          ~/.gradle/caches
          ~/.gradle/wrapper
        key: gradle-${{ runner.os }}-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
        restore-keys: |
          gradle-${{ runner.os }}-

    - name: Run Unit Tests
      run: ./gradlew test --info

    - name: Run Integration Tests
      run: ./gradlew integrationTest --info